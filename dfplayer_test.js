!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROD_BUILD_URL=t.TEST_BUILD_URL=t.TIME_TO_GET_VPAID_IMPRESED=t.RESIZE_TROTTLE_TIME=t.VPAID_INIT_TIMEOUT=t.REINIT_JITTER=t.PLAYER_CLASS=t.MEDIA_QUERYS=t.CLASSES=t.ASPECT_RATIO=void 0,t.ASPECT_RATIO=.5625,t.CLASSES={video:"v",container:"vc",adContainer:"ac",controls:"c",del:"del",mute:"mute",reinit:"r"},t.MEDIA_QUERYS=["screen and (min-width:340px)","screen and (min-width:1280px)","screen and (min-width:1920px)"],t.PLAYER_CLASS="df-player",t.REINIT_JITTER=1e3,t.VPAID_INIT_TIMEOUT=1500,t.RESIZE_TROTTLE_TIME=150,t.TIME_TO_GET_VPAID_IMPRESED=2e3,t.TEST_BUILD_URL="https://vst.dftest.tbhost.org",t.PROD_BUILD_URL="https://vst.dfnetwork.link"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReinitError=void 0;class i extends Error{constructor(e){super(e),this.name="ReinitError"}toString(){return`[object ${this.name}]`}}t.ReinitError=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsError=void 0;class i extends Error{constructor(){super(),this.name="AdsError"}toString(){return`[object ${this.name}]`}}t.AdsError=i},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skins=void 0,t.skins={light:{iconColor:"rgb(46, 46, 46)",adColor:"rgb(109, 109, 109)",bgColor:"rgb(236, 236, 236)",stroke:"#000"},dark:{iconColor:"rgb(236, 236, 236)",adColor:"#fff",bgColor:"rgba(0, 0, 0, 0.53);",stroke:"#fff"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createButton=void 0,t.createButton=(e,t)=>{const r=document.createElement("button");return r.classList.add(t[e]),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeSetter=void 0,t.attributeSetter=(e,t)=>{e.forEach(({attr:e,value:r})=>t.setAttribute(e,r.toString()))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoEndActionThenNotLooped=void 0;const i=r(6);t.videoEndActionThenNotLooped=(e,t,r)=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t),i.attributeSetter([{attr:"preload",value:"none"}],e),r.setAttribute("style","display:block !important"),e.load()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),n=r(9),a=document.querySelectorAll("."+i.PLAYER_CLASS);a.forEach(e=>{const t=e.dataset,r={skin:t.skin,randomizer:t.randomizer,custom_classes:t.custom_classes,media_querys:t.media_querys,aspect_ratio:t.aspect_ratio,looped:t.looped,retrays:t.retrays,userId:t.userId||"",siteId:t.siteId||"",subId:t.subId||"",prId:t.prId||"",sourceId:t.sourceId||"",test:t.test||"false"};new n.Player((e=>{return""!==e.sourceId?`${i.TEST_BUILD_URL}/${e.sourceId}${""===e.subId?"":"?subid="+e.subId}`:`${t=""+e.test,"true"===t?"https://rtb.adstest.tbhost.org/v/?prid=":"https://traflink.ru/v/?prid="}${e.prId||100}&pid=${e.userId}_${e.siteId}_${e.subId}`;var t})(r),e,r)})},function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const n=r(0),a=r(4),o=r(10),s=r(18),l=r(19),c=r(1),u=r(21),d=r(22),h=r(23),p=r(29),v=r(31),m=r(37);t.Player=class{constructor(e,t,r){if(this.currentRetray=0,this.maxRetrays=10,this.skin="dark",this.logger=new l.Logger(this),this.aspect_ratio=n.ASPECT_RATIO,this.custom_classes=n.CLASSES,this.randomizer=d.genID(),this.media_querys=n.MEDIA_QUERYS,this.looped="true",this.unsubscribeVPAID=[()=>{}],this.url=e,this.randomizer=(null==r?void 0:r.randomizer)||this.randomizer,this.custom_classes=(null==r?void 0:r.custom_classes)||this.custom_classes,this.media_querys=(null==r?void 0:r.media_querys)||this.media_querys,this.aspect_ratio=Number(null==r?void 0:r.aspect_ratio)||this.aspect_ratio,this.looped=(null==r?void 0:r.looped)||this.looped,{}.hasOwnProperty.call(a.skins,null==r?void 0:r.skin)&&(this.skin=null==r?void 0:r.skin),this.retrays=Number(null==r?void 0:r.retrays)||7,this.retrays=Number(this.retrays)>this.maxRetrays?this.maxRetrays:this.retrays,this.container=t,JSON.stringify(this.custom_classes)===JSON.stringify(n.CLASSES)){this.custom_classes=Object.assign({},this.custom_classes);for(let e in this.custom_classes)this.custom_classes[e]=this.custom_classes[e]+this.randomizer}this.DOM=new o.DOMClass(this.container,this.looped,this.custom_classes,this.aspect_ratio,this.skin,this.randomizer);const i=s.getWitdhAndHeight(this.container,this.aspect_ratio);this.VAST=new h.VASTClass(this.url,this.logger,i,this.looped),this.init()}init(){return i(this,void 0,void 0,(function*(){try{if(yield this.VAST.fetch(),this.DOM.createPlayer(),!this.VAST.containVPAID){this.DOM.createIcons();const e=this.removeFromPage.bind(this);this.DOM.buttonDel.addEventListener("click",e)}this.DOM.addActionsToPlayer();const e=m.configCreativesForVideo(this.VAST.mediaFiles,this.media_querys);this.DOM.addVideoSource(e),this.VAST.bindActions(this.DOM.video,this.DOM.buttonReinit),this.create()}catch(e){this.logger.log(new c.ReinitError("910"))}}))}create(){this.VAST.containVPAID&&(this.adContainer=this.DOM.adContainerInit(),this.unsubscribeVPAID=p.loadVPAIDs({container:this.container,video:this.DOM.video,wrapper:this.adContainer,mediaFiles:this.VAST.mediaFiles,callback:v.initVPAID,randomizer:this.randomizer,vastTracker:this.VAST.tracker,adParameters:this.VAST.creatives.adParameters,ASPECT_RATIO:this.aspect_ratio,logger:this.logger,looped:this.looped,autoPlayFn:this.VAST.autoPlayFn,reinitButton:this.DOM.buttonReinit}));const e=this.reinitByButton.bind(this);this.DOM.buttonReinit.addEventListener("click",e),this.DOM.appendToRealDOM();const t=this.removeFromPage.bind(this);window.onbeforeunload=function(){t()}}cleanStylesAndScripts(){[...document.querySelectorAll("."+this.randomizer)].forEach(e=>{e.remove()})}trackerSendClose(){try{this.VAST.tracker.close()}catch(e){}}reinitByButton(){this.removeFromPage(),this.trackerSendClose(),this.init()}getNextAd(){return i(this,void 0,void 0,(function*(){if(this.unsubscribeVastAndVpaid(),this.cleanStylesAndScripts(),this.removeFromPage(),yield this.VAST.getNextAds(),this.DOM.createPlayer(),!this.VAST.containVPAID){this.DOM.createIcons();const e=this.removeFromPage.bind(this);this.DOM.buttonDel.addEventListener("click",e)}this.DOM.addActionsToPlayer();const e=m.configCreativesForVideo(this.VAST.mediaFiles,this.media_querys);this.DOM.addVideoSource(e),this.VAST.bindActions(this.DOM.video,this.DOM.buttonReinit),this.create()}))}reInitByError(e){if(this.currentRetray+=1,this.trackerSendClose(),this.unsubscribeVastAndVpaid(),this.container.style.display="none",this.cleanStylesAndScripts(),this.currentRetray>=this.retrays||e)return void this.logger.log(new u.TerminateError("Превышен лимит перезапроса VAST",this.removeFromPage.bind(this)));const t=this.init.bind(this);setTimeout(()=>{t()},n.REINIT_JITTER)}unsubscribeVastAndVpaid(){this.unsubscribeVPAID.forEach(e=>i(this,void 0,void 0,(function*(){(yield e)()}))),this.VAST.unsubscribe.call(this.VAST)}removeFromPage(){this.cleanStylesAndScripts(),this.unsubscribeVastAndVpaid();try{this.DOM.removeFromPage.call(this.DOM)}catch(e){}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMClass=void 0;const i=r(11),n=r(12),a=r(5),o=r(13),s=r(14),l=r(15),c=r(16),u=r(17);t.DOMClass=class{constructor(e,t,r,i,n,a){this.VirtualDOMPlayer=document.createDocumentFragment(),this.ua=navigator.userAgent,this.parentNode=e,this.looped=t,this.custom_classes=r,this.aspect_ratio=i,this.skin=n,this.randomizer=a}appendCallback(){i.inlineCSS(this.custom_classes,this.skin,this.randomizer),this.setVideoOpt()}appendToRealDOM(){const e=this.appendCallback.bind(this);n.appendToRealDOM(this.parentNode,this.video,this.VirtualDOMPlayer,e)}addActionsToPlayer(){this.VirtualDOMPlayer.appendChild(this.wrapper),this.setVideoHeight()}createIcons(){this.createDelButton(),this.createControls(),this.addActionsToControls()}createPlayer(){this.parentNode.style.display="block",this.parentNode.innerHTML="",this.wrapper=document.createElement("div"),this.wrapper.classList.add(this.custom_classes.container),this.createVideo(),this.createReinitButton(),this.createComment()}removeFromPage(){try{this.parentNode.innerHTML="",window.removeEventListener("resize",this.resizeThrottler)}catch(e){}}adContainerInit(){const e=document.createElement("div");return e.classList.add(this.custom_classes.adContainer),this.wrapper.appendChild(e),e}addVideoSource(e){o.addVideoSource(e,this.ua,this.video)}createReinitButton(){this.buttonReinit=a.createButton("reinit",this.custom_classes),this.buttonReinit.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54 46.67"><title>repeat-black</title><g id="Слой_2" data-name="Слой 2"><g id="Capa_1" data-name="Capa 1"><path d="M30.67,0A23.36,23.36,0,0,0,7.34,23.33v.08L2.73,16.46A1.48,1.48,0,0,0,.67,16,1.47,1.47,0,0,0,.25,18.1L7,28.18A1.45,1.45,0,0,0,8,28.83h.18a1.49,1.49,0,0,0,1-.38l9.31-8.39a1.49,1.49,0,1,0-2-2.21l-6.18,5.58v-.11a20.37,20.37,0,1,1,6,14.4,1.48,1.48,0,0,0-2.1,2.1A23.33,23.33,0,1,0,30.67,0Z"/></g></g></svg>',this.wrapper.appendChild(this.buttonReinit)}createDelButton(){this.buttonDel=a.createButton("del",this.custom_classes),this.buttonDel.setAttribute("aria-label","Close"),this.buttonDel.dataset.state="close",this.buttonDel.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><title>close-black</title><g id="Слой_2" data-name="Слой 2"><g id="Слой_1-2" data-name="Слой 1"><path d="M9.47,8,15.7,1.77A1.05,1.05,0,0,0,15.7.3a1.05,1.05,0,0,0-1.47,0L8,6.53,1.77.3A1.05,1.05,0,0,0,.3.3a1.05,1.05,0,0,0,0,1.47L6.53,8,.3,14.23a1.05,1.05,0,0,0,0,1.47A1.06,1.06,0,0,0,1,16a1,1,0,0,0,.73-.3L8,9.47l6.23,6.23A1,1,0,0,0,15,16a1.06,1.06,0,0,0,.74-.3,1.05,1.05,0,0,0,0-1.47Z"/></g></g></svg>',this.wrapper.appendChild(this.buttonDel)}createComment(){const e=document.createComment("Copyright © digitalfrontier. All rights reserved.");this.wrapper.appendChild(e)}setVideoOpt(){u.setOpt(this.video)}createVideo(){this.video=l.createVideo(this.custom_classes),this.wrapper.appendChild(this.video)}createControls(){const e=s.createControls(this.custom_classes);this.wrapper.appendChild(e.all),this.buttonMute=e.mute}addActionsToControls(){this.buttonMute.addEventListener("click",e=>{this.video.muted=!this.video.muted})}setVideoHeight(){this.resizeThrottler=c.setVideoHeight(this.parentNode,this.video,this.aspect_ratio)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inlineCSS=void 0;const i=r(4);t.inlineCSS=(e,t,r)=>{var n;const a=document.createElement("style");a.innerHTML=`\n\n  .${e.reinit} {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: none!important;\n    border-radius: unset;\n    z-index: 5;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    height: 100%!important;\n    border-radius: 0!important;\n    grid-area: 1/-1;\n}\n\n.${e.container} button {\n    fill: ${i.skins[t].iconColor};\n    background: ${i.skins[t].bgColor};  \n    border: none;\n    padding: 0.5rem;\n    cursor: pointer;\n    border-radius: 50%;\n    speak: none;\n    outline: none;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale; \n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n\n.${e.video} {\n    width: 100%!important;\n    max-height: 100%;\n    object-fit: cover;\n    grid-area: 1/ -1;\n}\n\n.${e.controls} {\n    display: flex;\n    list-style: none;\n    width: 100%;\n    justify-content: flex-end;\n    position: absolute;\n    bottom: 5%;\n    opacity: 0;\n    box-sizing: border-box;\n    align-items: center;\n    padding: 0 1rem;\n}\n.${e.container}:before {\n    position: absolute;\n    top: -0.5rem;\n    display: block;\n    content: "${/en/g.test(navigator.language)?"Ad":"Реклама"}";\n    font-size: 0.75rem;\n    color: black;\n\n}\n.${e.adContainer} {\n    left: 0;\n    width: 100%;\n    height: 100%;\n    grid-area: 1/-1;\n}\n.${e.container} {\n    position: relative;\n    width: 100%;\n    padding: 1rem 0 0 0;\n    margin: 1rem 0 1rem 0;\n    box-sizing: content-box;\n    clear:both;\n    display: grid;\n}\n.${e.del} {\n    position: absolute;\n    right: 1rem;\n    top: 2rem;\n    opacity: 0;\n    z-index: 2;\n    transition: all 0.2s linear;\n    margin-right: 0.5rem;\n}\n.${e.del} svg {\n    width: 0.5rem;\n}\n.${e.mute} svg {\n    width: 1.5rem;\n}\n\n.${e.mute} .circle_lg{\n    stroke-dasharray: 600px 1500px;\n    transition: all .5s;\n    stroke: ${i.skins[t].stroke};\n}\n\n.${e.mute}  .circle_sm{\n    opacity: 1;\n    transition: all .25s;\n}\n\n.${e.mute}.mute .circle_lg{\n    stroke-dashoffset: -1360px;\n}\n\n.${e.mute}.mute .circle_sm{\n    opacity: 0;\n}\n\n.${e.container}:hover .${e.controls}, .${e.container}:hover .${e.del}{\n    opacity: 1;\n}\n\n\n.${e.reinit} svg {\n    width: 2rem!important;\n}\n@media (min-width: 320px) and (max-width: 767px) {\n .${e.controls}, .${e.del}{\n    opacity: 0.6;\n}\n.${e.del} svg {\n    width: 0.3rem;\n}\n.${e.del} {\n    margin-right: 0.2rem;\n}\n.${e.mute} svg {\n    width: 0.8rem;\n}\n}`,a.classList.add(r);const o=document.querySelector("script");null===(n=null==o?void 0:o.parentNode)||void 0===n||n.insertBefore(a,o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendToRealDOM=void 0,t.appendToRealDOM=(e,t,r,i)=>{e.appendChild(r),i(),null==t||t.load()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addVideoSource=void 0,t.addVideoSource=(e,t,r)=>{e.forEach(e=>{const i=document.createElement("source");i.src=e.src,i.type=e.type,i.media=t.search(/Edge/)>0?"":e.media,r.appendChild(i)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createControls=void 0;const i=r(5);t.createControls=e=>{const t=document.createElement("div");t.classList.add(e.controls),t.classList.add("controls");const r=i.createButton("mute",e);return r.setAttribute("aria-label","Mute"),r.classList.add("mute"),r.addEventListener("click",()=>{r.classList.toggle("mute")}),r.innerHTML='<svg class="mute" version="1.1"  xmlns:xlink="http://www.w3.org/1999/xlink" \n  viewBox="0 0 567.1 524.6"\n  enable-background="new 0 0 567.1 524.6" xml:space="preserve">\n  <path d="M323.9,4.6c-11.1-6.3-24.3-6.1-35.2,0.5c-0.5,0.3-1,0.7-1.5,1.1L132.7,136.9H11.4C5.1,136.9,0,142,0,148.3v216.6\n\tc0,3.1,1.2,6,3.3,8.1c2.2,2.1,5,3.3,8.1,3.3l121-0.1l154.4,141.9c0.6,0.5,1.2,1,1.8,1.3c5.6,3.4,11.9,5.1,18,5.1\n\tc5.9,0,11.8-1.5,17.2-4.6c11.4-6.4,18.2-18.1,18.2-31.4V36C342.1,22.8,335.3,11,323.9,4.6L323.9,4.6z M319.3,488.6\n\tc0,4.9-2.4,9.2-6.6,11.6c-1.8,1-6.2,2.9-11.4,0.3L148.2,359.9v-52c0-6.3-5.1-11.4-11.3-11.4c-6.4,0-11.4,5.1-11.4,11.4v45.5\n\tl-102.6,0.1V159.7h102.6v45.6c0,6.3,5.1,11.4,11.4,11.4c6.3,0,11.3-5.1,11.3-11.4v-51.7L301.1,24.2c5.2-2.7,9.8-0.8,11.6,0.2\n\tc4.1,2.3,6.6,6.7,6.6,11.6L319.3,488.6L319.3,488.6z"/>\n<path class="circle_sm"  d="M490.6,256.6c0-68.1-45.7-128.8-111.2-147.8c-6.1-1.7-12.4,1.7-14.1,7.8c-1.8,6,1.7,12.4,7.8,14.1\n\tc55.7,16.1,94.7,67.9,94.7,125.9c0,58-38.9,109.8-94.7,125.9c-6.1,1.8-9.6,8.1-7.8,14.1c1.4,5,6,8.2,10.9,8.2c1.1,0,2.1-0.2,3.2-0.4\n\tC444.9,385.5,490.6,324.7,490.6,256.6L490.6,256.6z"/>\n<path  class="circle_lg" fill="none" stroke="#000" stroke-width="22" stroke-linecap="round" stroke-miterlimit="10"  d="M386.6,41.2c0,0,168.7,15.7,168.7,221.7c0,206-171,225.7-212,225.7S130.8,462,130.8,263.7S304.9,38,342.5,38\n\tc37.6,0-192.8,430.9-192.8,430.9"/>\n  </svg>',t.appendChild(r),{mute:r,all:t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVideo=void 0;const i=r(6);t.createVideo=e=>{const t=document.createElement("video");return t.classList.add(e.video),t.controls=!1,i.attributeSetter([{attr:"muted",value:""},{attr:"preload",value:"auto"},{attr:"playsinline",value:""},{attr:"x-webkit-airplay",value:"allow"},{attr:"webkit-playsinline",value:""},{attr:"pip",value:"false"}],t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setVideoHeight=void 0,t.setVideoHeight=(e,t,r)=>{const i=()=>{const i=e.offsetWidth*r;t.style.height=i+"px"};let n;const a=()=>{t&&(n||(n=setTimeout((function(){n=null,i()}),150)))};return i(),window.addEventListener("resize",a),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setOpt=void 0,t.setOpt=e=>{e.webKitPlaysInline=!0,e.playsInline=!0,e.muted=!0,e.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQEAAAAACwAAAAAAQABAAACAkQBADs="}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWitdhAndHeight=void 0,t.getWitdhAndHeight=(e,t)=>{const r=e.offsetWidth;return[r,Number(r*t)]}},function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const n=r(20);t.Logger=class{constructor(e){this.player=e}log(e){return i(this,void 0,void 0,(function*(){const t=parseInt(e.message)>900?e.message:n.errorCodesVAST[e.message]||"900";try{this.player.VAST.tracker.errorWithCode(t,parseInt(t)>901)}catch(e){try{this.player.VAST.vastRespons.ads[0].errorURLTemplates.forEach(e=>{fetch(e.replace("[ERRORCODE]","902"))})}catch(e){}}switch(e.toString()){case"[object TerminateError]":break;case"[object ReinitError]":this.player.reInitByError();break;case"[object AdsError]":this.player.getNextAd()}}))}skip(){return i(this,void 0,void 0,(function*(){this.player.reInitByError(!0)}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodesVAST=void 0,t.errorCodesVAST={"no active campaigns":"901","Некорректный VAST, отсутствует параметр ads":"902","Превышен лимит перезапроса VAST":"903","Истекло время на отсылку Impression":"905","Ошибка загрузки VPAID":"906","VPAID не валиден, так как не предоставляет все обязательные методы":"907","Слишком долгое ожидание инициализации стороннего плеера":"908","VPAID AdError":"909","Ошибка на этапе инициализации плеера":"910","Не корректный VAST (common)":"911","В текущем VAST не осталось рекламных компаний, запрашиваю новый VAST":"912","Пользователь прервал работу плеера переходом на другую страницу":"913","Ошибка при перезапуске плеера":"914"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminateError=void 0;class i extends Error{constructor(e,t){super(e),this.name="TerminateError",t()}toString(){return`[object ${this.name}]`}}t.TerminateError=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genID=void 0,t.genID=function(){return"_"+Math.random().toString(36).substr(2,9)}},function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VASTClass=void 0;const n=r(24),a=r(1),o=r(25),s=r(26),l=r(27),c=r(28);t.VASTClass=class{constructor(e,t,r,i){this.vastClient=new n.VASTClient,this.containVPAID=!1,this.autoPlayFn=()=>{},this.logger=t,this.url=e,this.widthAndHeight=r,this.looped=i}fetch(){return i(this,void 0,void 0,(function*(){const e={withCredentials:!0,wrapperLimit:7,resolveAll:!1};try{c.replaceMacro(this.vastClient,this.widthAndHeight),this.setCurrentAd(yield this.vastClient.get(this.url,e))}catch(t){yield this.getNextAds()}}))}getNextAds(){return i(this,void 0,void 0,(function*(){if(!this.vastClient.hasRemainingAds())throw new a.ReinitError("912");try{const e=yield this.vastClient.getNextAds();this.setCurrentAd(e)}catch(e){if(!this.vastClient.hasRemainingAds())throw new a.ReinitError("912");this.getNextAds()}}))}setCurrentAd(e){this.currentAdd=e.ads[0],this.currentAdd.errorURLTemplates=this.decodeURLs(this.currentAdd.errorURLTemplates),this.creatives=this.currentAdd.creatives[0],this.mediaFiles=this.creatives.mediaFiles,this.containVPAID=this.mediaFiles.some(o.VPAIDCondition),this.tracker=new n.VASTTracker(this.vastClient,this.currentAdd,this.creatives)}decodeURLs(e){return e.map(e=>decodeURI(e))}bindActions(e,t){this.video=e,this.autoPlayFn=s.autoPlayPause(this.video,this.tracker),l.commonActions(this.video,this.tracker,this.logger,this.looped,this.autoPlayFn,t);const r=this.unsubscribe.bind(this);window.addEventListener("beforeunload",r,!1)}unsubscribe(){window.removeEventListener("scroll",this.autoPlayFn,!1),window.removeEventListener("resize",this.autoPlayFn,!1)}}},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=d(e);if(t){var n=d(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return h(this,r)}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}r.r(t),r.d(t,"VASTClient",(function(){return oe})),r.d(t,"VASTParser",(function(){return re})),r.d(t,"VASTTracker",(function(){return se}));var m=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],n=y(e);for(var a in!t.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=E(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[a]=b(t[a]);for(var o in n){var s=n[o];"string"==typeof s&&i.push(g(s,t))}return i}function g(e,t){var r=(e=A(e,t)).match(/[^[\]]+(?=])/g);if(!r)return e;var i=r.filter((function(e){return m.indexOf(e)>-1}));return 0===i.length?e:A(e,i=i.reduce((function(e,t){return e[t]=-1,e}),{}))}function A(e,t){var r=e;for(var i in t){var n=t[i];r=r.replace(new RegExp("(?:\\[|%{2}|%5B)(".concat(i,")(?:\\]|%{2}|%5D)"),"g"),n)}return r}function y(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function T(e,t){for(var r=0;r<t.length;r++)if(k(t[r],e))return!0;return!1}function k(e,t){if(e&&t){var r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);return r.length===i.length&&e.id===t.id&&e.url===t.url}return!1}function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=String(e);return r.length<t?R(0,t-r.length,!1).map((function(){return"0"})).join("")+r:r}function R(e,t,r){for(var i=[],n=e<t,a=r?n?t+1:t-1:t,o=e;n?o<a:o>a;n?o++:o--)i.push(o);return i}var w={track:function(e,t,r){f(e,t,r).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:f,extractURLsFromTemplates:y,containsTemplateObject:T,isTemplateObjectEqual:k,encodeURIComponentRFC3986:b,replaceUrlMacros:g,leftpad:E,range:R,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,r){return t.concat(Array.isArray(r)?e(r):r)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[],n=r.concat(i);return n.reduce((function(e,t){return T(t,e)||e.push(t),e}),[])}};function L(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var C={childByName:function(e,t){var r=e.childNodes;for(var i in r){var n=r[i];if(n.nodeName===t)return n}},childrenByName:function(e,t){var r=[],i=e.childNodes;for(var n in i){var a=i[n];a.nodeName===t&&r.push(a)}return r},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var r=location.protocol;return"".concat(r).concat(e)}if(-1===e.indexOf("://")){var i=t.slice(0,t.lastIndexOf("/"));return"".concat(i,"/").concat(e)}return e},parseBoolean:L,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,r){var i=t.getAttribute(e);i&&r.setAttribute(e,i)},parseAttributes:function(e){for(var t=e.attributes,r={},i=0;i<t.length;i++)r[t[i].nodeName]=t[i].nodeValue;return r},parseDuration:function(e){if(null==e)return-1;if(w.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var r=t[2].split("."),i=parseInt(r[0]);2===r.length&&(i+=parseFloat("0.".concat(r[1])));var n=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(n)||isNaN(i)||n>3600||i>60?-1:a+n+i},splitVAST:function(e){var t=[],r=null;return e.forEach((function(i,n){if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){var a=e[n-1];if(a&&a.sequence===i.sequence-1)return void(r&&r.push(i));delete i.sequence}r=[i],t.push(r)})),t},assignAttributes:function(e,t){if(e)for(var r in e){var i=e[r];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){var n=i.nodeValue;"boolean"==typeof t[i.nodeName]&&(n=L(n)),t[i.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var r=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),i=r.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){w.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=r.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][r];Array.isArray(e.trackingEvents[r])||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(o)}"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&i.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=w.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,i)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function I(e,t){var r=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:"companion",required:null,variations:[]}}(t);return r.required=e.getAttribute("required")||null,r.variations=C.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(C.parseAttributes(e));t.htmlResources=C.childrenByName(e,"HTMLResource").reduce((function(e,t){var r=C.parseNodeText(t);return r?e.concat(r):e}),[]),t.iframeResources=C.childrenByName(e,"IFrameResource").reduce((function(e,t){var r=C.parseNodeText(t);return r?e.concat(r):e}),[]),t.staticResources=C.childrenByName(e,"StaticResource").reduce((function(e,t){var r=C.parseNodeText(t);return r?e.concat({url:r,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=C.parseNodeText(C.childByName(e,"AltText"))||null;var r=C.childByName(e,"TrackingEvents");r&&C.childrenByName(r,"Tracking").forEach((function(e){var r=e.getAttribute("event"),i=C.parseNodeText(e);r&&i&&(Array.isArray(t.trackingEvents[r])||(t.trackingEvents[r]=[]),t.trackingEvents[r].push(i))})),t.companionClickTrackingURLTemplates=C.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:C.parseNodeText(e)}})),t.companionClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"CompanionClickThrough"))||null;var i=C.childByName(e,"AdParameters");return i&&(t.adParameters=C.parseNodeText(i),t.xmlEncoded=i.getAttribute("xmlEncoded")||null),t})),r}function N(e){return"linear"===e.type}function S(e,t){var r,i=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);i.duration=C.parseDuration(C.parseNodeText(C.childByName(e,"Duration")));var n=e.getAttribute("skipoffset");if(null==n)i.skipDelay=null;else if("%"===n.charAt(n.length-1)&&-1!==i.duration){var a=parseInt(n,10);i.skipDelay=i.duration*(a/100)}else i.skipDelay=C.parseDuration(n);var o=C.childByName(e,"VideoClicks");if(o){var s=C.childByName(o,"ClickThrough");i.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:C.parseNodeText(s)}:null,C.childrenByName(o,"ClickTracking").forEach((function(e){i.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),C.childrenByName(o,"CustomClick").forEach((function(e){i.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))}var l=C.childByName(e,"AdParameters");l&&(i.adParameters=C.parseNodeText(l)),C.childrenByName(e,"TrackingEvents").forEach((function(e){C.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=C.parseNodeText(e);if(t&&n){if("progress"===t){if(!(r=e.getAttribute("offset")))return;t="%"===r.charAt(r.length-1)?"progress-".concat(r):"progress-".concat(Math.round(C.parseDuration(r)))}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(n)}}))})),C.childrenByName(e,"MediaFiles").forEach((function(e){C.childrenByName(e,"MediaFile").forEach((function(e){i.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=C.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var r=e.getAttribute("scalable");r&&"string"==typeof r&&(t.scalable=C.parseBoolean(r));var i=e.getAttribute("maintainAspectRatio");return i&&"string"==typeof i&&(t.maintainAspectRatio=C.parseBoolean(i)),t}(e))}));var t=C.childByName(e,"InteractiveCreativeFile");t&&(i.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:C.parseBoolean(e.variableDuration),fileURL:null}}(C.parseAttributes(e));return t.fileURL=C.parseNodeText(e),t}(t));var r=C.childByName(e,"ClosedCaptionFiles");r&&C.childrenByName(r,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(C.parseAttributes(e));t.fileURL=C.parseNodeText(e),i.closedCaptionFiles.push(t)}));var n,a,o,s=C.childByName(e,"Mezzanine"),l=(n=s,a={},o=!1,["delivery","type","width","height"].forEach((function(e){n&&n.getAttribute(e)?a[e]=n.getAttribute(e):o=!0})),o?null:a);if(l){var c={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};c.id=s.getAttribute("id"),c.fileURL=C.parseNodeText(s),c.delivery=l.delivery,c.codec=s.getAttribute("codec"),c.type=l.type,c.width=parseInt(l.width,10),c.height=parseInt(l.height,10),c.fileSize=parseInt(s.getAttribute("fileSize"),10),c.mediaType=s.getAttribute("mediaType")||"2D",i.mezzanine=c}}));var c=C.childByName(e,"Icons");return c&&C.childrenByName(c,"Icon").forEach((function(e){i.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=C.parseDuration(e.getAttribute("offset")),t.duration=C.parseDuration(e.getAttribute("duration")),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var r=C.childByName(e,"IconClicks");return r&&(t.iconClickThroughURLTemplate=C.parseNodeText(C.childByName(r,"IconClickThrough")),C.childrenByName(r,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))),t.iconViewTrackingURLTemplate=C.parseNodeText(C.childByName(e,"IconViewTracking")),t}(e))})),i}function P(e,t){var r=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return C.childrenByName(e,"TrackingEvents").forEach((function(e){var t,i;C.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),i=C.parseNodeText(e),t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))}))})),C.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=C.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=C.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=C.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var i=C.childByName(e,"AdParameters");i&&(t.adParameters=C.parseNodeText(i)),t.nonlinearClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"NonLinearClickThrough")),C.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),r.variations.push(t)})),r}function O(e){var t=[];return e.forEach((function(e){var r=function e(t){if("#comment"===t.nodeName)return null;var r,i={name:null,value:null,attributes:{},children:[]},n=t.attributes,a=t.childNodes;if(i.name=t.nodeName,t.attributes)for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];s.nodeName&&s.nodeValue&&(i.attributes[s.nodeName]=s.nodeValue)}for(var l in a)if(a.hasOwnProperty(l)){var c=e(a[l]);c&&i.children.push(c)}if(0===i.children.length||1===i.children.length&&["#cdata-section","#text"].indexOf(i.children[0].name)>=0){var u=C.parseNodeText(t);""!==u&&(i.value=u),i.children=[]}return null===(r=i).value&&0===Object.keys(r.attributes).length&&0===r.children.length?null:i}(e);r&&t.push(r)})),t}function U(e){var t=[];return e.forEach((function(e){var r,i,n={id:e.getAttribute("id")||null,adId:D(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},a=C.childByName(e,"UniversalAdId");a&&(r={idRegistry:a.getAttribute("idRegistry")||"unknown",value:C.parseNodeText(a)});var o=C.childByName(e,"CreativeExtensions");for(var s in o&&(i=O(C.childrenByName(o,"CreativeExtension"))),e.childNodes){var l=e.childNodes[s],c=void 0;switch(l.nodeName){case"Linear":c=S(l,n);break;case"NonLinearAds":c=P(l,n);break;case"CompanionAds":c=I(l,n)}c&&(r&&(c.universalAdId=r),i&&(c.creativeExtensions=i),t.push(c))}})),t}function D(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var x={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function _(e,t){if(x[e.nodeName]&&x[e.nodeName].attributes){var r=x[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));r.length>0&&B({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:r},t)}}function V(e,t,r){var i=x[e.nodeName],n=!r&&"Wrapper"!==e.nodeName;if(i&&!n){if(i.subElements){var a=i.subElements.filter((function(t){return!C.childByName(e,t)}));a.length>0&&B({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:a},t)}r&&i.oneOfinLineResources&&(i.oneOfinLineResources.some((function(t){return C.childByName(e,t)}))||B({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:i.oneOfinLineResources},t))}}function M(e){return e.children&&0!==e.children.length}function B(e,t){var r=e.name,i=e.parentName,n=e.attributes,a=e.subElements,o=e.oneOfResources,s="Element '".concat(r,"'");t("VAST-warning",{message:s+=n?" missing required attribute(s) '".concat(n.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):o?" must provide one of the following '".concat(o.join(", "),"' "):" is empty",parentElement:i,specVersion:4.1})}var F=function e(t,r,i){if(t&&t.nodeName)if("InLine"===t.nodeName&&(i=!0),_(t,r),M(t)){V(t,r,i);for(var n=0;n<t.children.length;n++)e(t.children[n],r,i)}else 0===C.parseNodeText(t).length&&B({name:t.nodeName,parentName:t.parentNode.nodeName},r)};function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds,n=r.followAdditionalWrappers,a=e.childNodes;for(var o in a){var s=a[o];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==n)){if(C.copyNodeAttribute("id",e,s),C.copyNodeAttribute("sequence",e,s),C.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:q(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:H(s,t,{allowMultipleAds:i}),type:"INLINE"}}}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds;return!1===i&&e.getAttribute("sequence")?null:W(e,t)}function W(e,t){t&&F(e,t);var r=e.childNodes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(C.parseAttributes(e));for(var n in r){var a=r[n];switch(a.nodeName){case"Error":i.errorURLTemplates.push(C.parseNodeText(a));break;case"Impression":i.impressionURLTemplates.push({id:a.getAttribute("id")||null,url:C.parseNodeText(a)});break;case"Creatives":i.creatives=U(C.childrenByName(a,"Creative"));break;case"Extensions":var o=C.childrenByName(a,"Extension");i.extensions=O(o),i.adVerifications.length||(i.adVerifications=$(o));break;case"AdVerifications":i.adVerifications=z(C.childrenByName(a,"Verification"));break;case"AdSystem":i.system={value:C.parseNodeText(a),version:a.getAttribute("version")||null};break;case"AdTitle":i.title=C.parseNodeText(a);break;case"AdServingId":i.adServingId=C.parseNodeText(a);break;case"Category":i.categories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)});break;case"Expires":i.expires=parseInt(C.parseNodeText(a),10);break;case"ViewableImpression":i.viewableImpression=Q(a);break;case"Description":i.description=C.parseNodeText(a);break;case"Advertiser":i.advertiser={id:a.getAttribute("id")||null,value:C.parseNodeText(a)};break;case"Pricing":i.pricing={value:C.parseNodeText(a),model:a.getAttribute("model")||null,currency:a.getAttribute("currency")||null};break;case"Survey":i.survey=C.parseNodeText(a);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)})}}return i}function q(e,t){var r=W(e,t),i=e.getAttribute("followAdditionalWrappers"),n=e.getAttribute("allowMultipleAds"),a=e.getAttribute("fallbackOnNoAd");r.followAdditionalWrappers=!i||C.parseBoolean(i),r.allowMultipleAds=!!n&&C.parseBoolean(n),r.fallbackOnNoAd=a?C.parseBoolean(a):null;var o=C.childByName(e,"VASTAdTagURI");if(o?r.nextWrapperURL=C.parseNodeText(o):(o=C.childByName(e,"VASTAdTagURL"))&&(r.nextWrapperURL=C.parseNodeText(C.childByName(o,"URL"))),r.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[e.type]||(r.trackingEvents[e.type]={});var t=function(t){var i=e.trackingEvents[t];Array.isArray(r.trackingEvents[e.type][t])||(r.trackingEvents[e.type][t]=[]),i.forEach((function(i){r.trackingEvents[e.type][t].push(i)}))};for(var i in e.trackingEvents)t(i)}e.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){r.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){r.videoCustomClickURLTemplates.push(e)})))}})),r.nextWrapperURL)return r}function z(e){var t=[];return e.forEach((function(e){var r={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=e.childNodes;for(var n in C.assignAttributes(e.attributes,r),i){var a=i[n];switch(a.nodeName){case"JavaScriptResource":case"ExecutableResource":r.resource=C.parseNodeText(a),C.assignAttributes(a.attributes,r);break;case"VerificationParameters":r.parameters=C.parseNodeText(a)}}var o=C.childByName(e,"TrackingEvents");o&&C.childrenByName(o,"Tracking").forEach((function(e){var t=e.getAttribute("event"),i=C.parseNodeText(e);t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))})),t.push(r)})),t}function $(e){var t=null,r=[];return e.some((function(e){return t=C.childByName(e,"AdVerifications")})),t&&(r=z(C.childrenByName(t,"Verification"))),r}function Q(e){var t={};t.id=e.getAttribute("id")||null;var r=e.childNodes;for(var i in r){var n=r[i],a=n.nodeName,o=C.parseNodeText(n);if(("Viewable"===a||"NotViewable"===a||"ViewUndetermined"===a)&&o){var s=a.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var G=function(){function e(){n(this,e),this._handlers=[]}return o(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(i(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(i(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,r){var i={fired:!1,wrapFn:void 0};function n(){i.fired||(e.off(t,i.wrapFn),i.fired=!0,r.bind(e).apply(void 0,arguments))}return i.wrapFn=n,n}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(r){return r.event!==e||r.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=!1;return this._handlers.forEach((function(t){"*"===t.event&&(n=!0,t.handler.apply(t,[e].concat(r))),t.event===e&&(n=!0,t.handler.apply(t,r))})),n}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,r){return r.event===e&&t.push(r.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),Y=function(e,t,r){r(new Error("Please bundle the library for node to use the node urlHandler"))};function K(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function X(e,t,r){var i=r?408:e.status,n=r?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(i,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(i,")");t(new Error(n),null,{statusCode:i})}var J=function(e,t,r){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return r(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));var i,n,a;try{var o=K();o.open("GET",e),o.timeout=t.timeout||12e4,o.withCredentials=(n=(i=e).includes("rutarget.ru"),a=i.includes("dfnetwork.link"),!(!n&&!a)||t.withCredentials||!1),o.overrideMimeType&&o.overrideMimeType("text/xml"),o.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):X(e,t,!1)}(o,r)},o.onerror=function(){return X(o,r,!1)},o.onabort=function(){return X(o,r,!1)},o.ontimeout=function(){return X(o,r,!0)},o.send()}catch(e){r(new Error("XHRURLHandler: Unexpected error"))}},Z=function(){return!!K()},ee={get:function(e,t,r){return r||("function"==typeof t&&(r=t),t={}),"undefined"==typeof window||null===window?Y(e,t,r):Z()?J(e,t,r):r(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},te={ERRORCODE:900,extensions:[]},re=function(e){u(r,G);var t=p(r);function r(){var e;return n(this,r),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return o(r,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,[{},te,t].concat(i))),w.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"fetchVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var o=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:i,wrapperDepth:r,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout}),t.urlHandler.get(e,t.fetchingOptions,(function(s,l){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.round(Date.now()-o),d=Object.assign({url:e,previousUrl:i,wrapperDepth:r,error:s,duration:u},c);t.emit("VAST-resolved",d),s?a(s):n(l)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||12e4,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||ee,this.vastVersion=null}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var r=e?w.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(i){return r.previousUrl=e,r.isRootVAST=!0,r.url=e,t.parse(i,r).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),r.isRootVAST=!0,this.parse(e,r).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,r={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(r),r}},{key:"parseVastXml",value:function(e,t){var r=t.isRootVAST,i=void 0!==r&&r,n=t.url,a=void 0===n?null:n,o=t.wrapperDepth,s=void 0===o?0:o,l=t.allowMultipleAds,c=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:a,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var u=[],d=e.documentElement.childNodes,h=e.documentElement.getAttribute("version");for(var p in i&&h&&(this.vastVersion=h),d){var v=d[p];if("Error"===v.nodeName){var m=C.parseNodeText(v);i?this.rootErrorURLTemplates.push(m):this.errorURLTemplates.push(m)}else if("Ad"===v.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&u.length>1)break;var f=j(v,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:c});f.ad?(u.push(f.ad),this.emit("VAST-ad-parsed",{type:f.type,url:a,wrapperDepth:s,adIndex:u.length-1,vastVersion:h})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.url,i=void 0===r?null:r,n=t.resolveAll,a=void 0===n||n,o=t.wrapperSequence,s=void 0===o?null:o,l=t.previousUrl,c=void 0===l?null:l,u=t.wrapperDepth,d=void 0===u?0:u,h=t.isRootVAST,p=void 0!==h&&h,v=t.followAdditionalWrappers,m=t.allowMultipleAds,f=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&p&&(m=!0);try{f=this.parseVastXml(e,{isRootVAST:p,url:i,wrapperDepth:d,allowMultipleAds:m,followAdditionalWrappers:v})}catch(e){return Promise.reject(e)}return 1===f.length&&null!=s&&(f[0].sequence=s),!1===a&&(this.remainingAds=C.splitVAST(f),f=this.remainingAds.shift()),this.resolveAds(f,{wrapperDepth:d,previousUrl:c,url:i})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=r.wrapperDepth,n=r.previousUrl,a=r.url,o=[];return n=a,t.forEach((function(t){var r=e.resolveWrappers(t,i,n);o.push(r)})),Promise.all(o).then((function(t){var r=w.flatten(t);if(!r&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:i,previousUrl:n,url:a})}return r}))}},{key:"resolveWrappers",value:function(e,t,r){var i=this;return new Promise((function(n){var a;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=i.maxWrapperDepth||-1!==i.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=C.resolveVastAdTagURI(e.nextWrapperURL,r),i.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(a=i.parsingOptions.allowMultipleAds)&&void 0!==a?a:e.allowMultipleAds,s=e.sequence;i.fetchVAST(e.nextWrapperURL,t,r).then((function(a){return i.parse(a,{url:e.nextWrapperURL,previousUrl:r,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&C.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var r=e.ads[t];(r.errorCode||0===r.creatives.length)&&(this.trackVastError(r.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:r.errorCode||303},{ERRORMESSAGE:r.errorMessage||""},{extensions:r.extensions},{system:r.system}),e.ads.splice(t,1))}}}]),r}(),ie=null,ne={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ae=function(){function e(){n(this,e),this.storage=this.initStorage()}return o(e,[{key:"initStorage",value:function(){if(ie)return ie;try{ie="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){ie=null}return ie&&!this.isStorageDisabled(ie)||(ie=ne).clear(),ie}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),oe=function(){function e(t,r,i){n(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=r||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new re,this.storage=i||new ae,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return o(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Date.now();return(r=Object.assign({},this.defaultOptions,r)).hasOwnProperty("resolveAll")||(r.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise((function(n,a){if(t.cappingFreeLunch>=t.totalCalls)return a(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var o=i-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return a(new Error("VAST call canceled – (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,r).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}}]),e}(),se=function(e){u(r,G);var t=p(r);function r(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in n(this,r),(o=t.call(this)).ad=i,o.creative=a,o.variation=s,o.muted=!1,o.impressed=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o.creative.trackingEvents){var c=o.creative.trackingEvents[l];o.trackingEvents[l]=c.slice(0)}return N(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on("start",(function(){e.lastSuccessfulAd=Date.now()})),o}return o(r,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.skipDelay||-1;if(-1===i||this.skippable||(i>e?this.emit("skip-countdown",i-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var n=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push("start");for(var o=this.lastPercentage;o<n;o++)a.push("progress-".concat(o+1,"%"));for(var s in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(a.push(s),this._alreadyTriggeredQuartiles[s]=!0);this.lastPercentage=n}a.forEach((function(e){t.track(e,{macros:r,once:!0})})),e<this.progress&&this.track("rewind",{macros:r})}this.progress=e}},{key:"isQuartileReached",value:function(e,t,r){var i=!1;return t<=r&&!this._alreadyTriggeredQuartiles[e]&&(i=!0),i}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e}},{key:"setSkipDelay",value:function(e){"number"==typeof e&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error({ERRORCODE:e},t)}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("notUsed",{macros:e}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var r=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!r)throw new Error("No associated verification element found for vendor: ".concat(e));var i=r.trackingEvents;if(i&&i.verificationNotExecuted){var n=i.verificationNotExecuted;this.trackURLs(n,t),this.emit("verificationNotExecuted",{trackingURLTemplates:n})}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var r=this.clickThroughURLTemplate||e,i=c({},t);if(r){this.progress&&(i.ADPLAYHEAD=this.progressFormatted());var n=w.resolveURLTemplates([r],i)[0];this.emit("clickthrough",n)}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.macros,i=void 0===r?{}:r,n=t.once,a=void 0!==n&&n;"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var o=this.trackingEvents[e],s=this.emitAlwaysEvents.indexOf(e)>-1;o?(this.emit(e,{trackingURLTemplates:o}),this.trackURLs(o,i)):s&&this.emit(e,null),a&&(delete this.trackingEvents[e],s&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=c({},t);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(i.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(i.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),w.track(e,i,r)}},{key:"convertToTimecode",value:function(e){var t=1e3*e,r=Math.floor(t/36e5),i=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),a=Math.floor(t%1e3);return"".concat(w.leftpad(r,2),":").concat(w.leftpad(i,2),":").concat(w.leftpad(n,2),".").concat(w.leftpad(a,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPAIDCondition=void 0,t.VPAIDCondition=e=>"VPAID"===e.apiFramework&&"application/javascript"===e.mimeType},function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.autoPlayPause=void 0,t.autoPlayPause=(e,t)=>{const r=()=>i(void 0,void 0,void 0,(function*(){let r=e.getBoundingClientRect();r.top>-r.height/2&&r.bottom<=document.documentElement.clientHeight+r.height/2?(t.setPaused(!1),t.setDuration(1),e.play().then(()=>{t.trackImpression(),t.setPaused(!1)}).catch(e=>{})):(yield e.pause(),t.setPaused(!0))}));return setTimeout(r,0),window.addEventListener("scroll",r,!1),window.addEventListener("resize",r,!1),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonActions=void 0;const i=r(2),n=r(7);t.commonActions=(e,t,r,a,o,s)=>{const l=e.querySelector("source:last-child");let c=!1;const u=()=>t.trackImpression(),d=()=>t.setPaused(!1),h=e=>{r.log(new i.AdsError)},p=()=>t.setPaused(!0),v=()=>{!c&&t.complete(),c=!0,"true"===a?e.play():n.videoEndActionThenNotLooped(e,o,s)},m=e=>t.setMuted(e.target.muted),f=()=>t.click(),g=e=>{const r=e.target;t.setProgress(r.currentTime)};e.addEventListener("error",h),null!==l&&l.addEventListener("error",h),e.addEventListener("canplay",()=>{t.setDuration(0|e.duration),e.addEventListener("play",u,{once:!0}),e.addEventListener("play",d),e.addEventListener("pause",p),e.addEventListener("ended",v),e.addEventListener("volumechange",m),e.addEventListener("timeupdate",g),e.addEventListener("click",f)},{once:!0}),t.on("skip",()=>r.skip()),t.on("clickthrough",e=>window.open(e)),t.on("complete",()=>{"true"!==a&&n.videoEndActionThenNotLooped(e,o,s)}),t.on("close",()=>{e.removeEventListener("play",d),e.removeEventListener("error",h),null!==l&&l.removeEventListener("error",h),e.removeEventListener("pause",p),e.removeEventListener("ended",v),e.removeEventListener("volumechange",m),e.removeEventListener("timeupdate",g),e.removeEventListener("click",f)}),t.on("firstQuartile",()=>{}),t.on("midpoint",()=>{}),t.on("thirdQuartile",()=>{}),t.on("rewind",()=>{})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceMacro=void 0,t.replaceMacro=(e,t)=>{e.getParser().addURLTemplateFilter(e=>e.replace("%5Bwidth%5D",""+t[0]).replace("%5Bheight%5D",""+t[1]).replace("%5Bpage_url%5D",""+document.location.href).replace("%5Brandom%5D",""+Math.floor(99999999*Math.random()+1)))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadVPAIDs=void 0;const i=r(30);t.loadVPAIDs=e=>e.mediaFiles.map(t=>"application/javascript"===t.mimeType?i.addScriptToDocument(Object.assign(Object.assign({},e),{url:t.fileURL})):()=>{})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addScriptToDocument=void 0;const i=r(1);t.addScriptToDocument=e=>new Promise((t,r)=>{const n=document.createElement("iframe");n.classList.add(e.randomizer),n.setAttribute("style","border:0px;margin:0px;opacity:1;padding:0px;height:0;position:absolute;width:0;top:0;left:0;"),e.container.appendChild(n);const a=n.contentWindow;null==a||a.document.write(`<head><style>body{margin:0}</style></head><body><script type="text/javascript" class="${e.randomizer}" charset="UTF-8" src="${e.url}" async><\/script></body>`);const o=null==a?void 0:a.document.querySelector("."+e.randomizer);null==o||o.addEventListener("load",()=>{try{const r=null==a?void 0:a.getVPAIDAd(),i=e.callback({adUnit:r,vastTracker:e.vastTracker,adParameters:e.adParameters,container:e.container,wrapper:e.wrapper,video:e.video,ASPECT_RATIO:e.ASPECT_RATIO,logger:e.logger,looped:e.looped,autoPlayFn:e.autoPlayFn,reinitButton:e.reinitButton});t(i)}catch(n){e.logger.log(new i.ReinitError("906")),r(()=>{})}}),null==o||o.addEventListener("error",()=>e.logger.log(new i.ReinitError("906")))})},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.initVPAID=void 0;const i=r(0),n=r(32),a=r(2),o=r(33),s=r(34),l=r(35);t.initVPAID=t=>{const r=e.setTimeout(()=>{t.logger.log(new a.AdsError)},i.VPAID_INIT_TIMEOUT);if(!o.checkSpec(t.adUnit))return t.logger.log(new a.AdsError),()=>{};t.adUnit.handshakeVersion("2.0"),t.adUnit.initAd(t.container.offsetWidth,t.container.offsetWidth*t.ASPECT_RATIO,"normal",-1,{AdParameters:t.adParameters},{slot:t.wrapper,videoSlot:t.video,videoSlotCanAutoPlay:!0});const c=n.setVPAIDHeight(t.container,t.ASPECT_RATIO,t.adUnit),u=l.listenEvents({video:t.video,adUnit:t.adUnit,vastTracker:t.vastTracker,logger:t.logger,initTimeOut:r,looped:t.looped,autoPlayFn:t.autoPlayFn,reinitButton:t.reinitButton});for(let e in u)t.adUnit.subscribe(u[e],e);s.bindActions(t.adUnit,t.vastTracker);const d=()=>{clearTimeout(r),t.vastTracker.close(),window.removeEventListener("resize",c);for(let e in u)t.adUnit.unsubscribe(u[e],e)};return window.addEventListener("beforeunload",d,!1),d}}).call(this,r(3))},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setVPAIDHeight=void 0;const i=r(0);t.setVPAIDHeight=(t,r,n)=>{try{const a=()=>{const e=t.offsetWidth,i=e*r;n.resizeAd(e,i,"normal")};let o;const s=()=>{o||(o=e.setTimeout((function(){o=null,a()}),i.RESIZE_TROTTLE_TIME))};return a(),window.addEventListener("resize",s),s}catch(a){return()=>{}}}}).call(this,r(3))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkSpec=void 0,t.checkSpec=e=>!!(e.handshakeVersion&&"function"==typeof e.handshakeVersion&&e.initAd&&"function"==typeof e.initAd&&e.startAd&&"function"==typeof e.startAd&&e.stopAd&&"function"==typeof e.stopAd&&e.skipAd&&"function"==typeof e.skipAd&&e.resizeAd&&"function"==typeof e.resizeAd&&e.pauseAd&&"function"==typeof e.pauseAd&&e.resumeAd&&"function"==typeof e.resumeAd&&e.expandAd&&"function"==typeof e.expandAd&&e.collapseAd&&"function"==typeof e.collapseAd&&e.subscribe&&"function"==typeof e.subscribe&&e.unsubscribe&&"function"==typeof e.unsubscribe)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindActions=void 0,t.bindActions=(e,t)=>{t.on("resume",()=>{e.startAd()}),t.on("pause",()=>{e.pauseAd()}),t.on("start",()=>{e.startAd(),e.resumeAd()}),t.on("skip",()=>{e.skipAd()})}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.listenEvents=void 0;const i=r(0),n=(r(36),r(7)),a=r(2);t.listenEvents=t=>{let r,o=!1;return{AdLoaded:()=>{clearTimeout(t.initTimeOut)},AdVolumeChange:()=>{t.video.addEventListener("volumechange",e=>{t.vastTracker.setMuted(e.target.muted)})},AdVideoStart:()=>{o||(o=!0,r=e.setTimeout(()=>{t.logger.log(new a.AdsError)},i.TIME_TO_GET_VPAID_IMPRESED))},AdPlaying:()=>{try{t.adUnit.setAdVolume(0)}catch(e){}},AdError:e=>{t.logger.log(new a.AdsError)},AdLog:e=>{},AdImpression:()=>{clearTimeout(r),o=!0,t.vastTracker.trackImpression()},AdStopped:()=>{},AdVideoComplete:()=>{t.vastTracker.complete(),n.videoEndActionThenNotLooped(t.video,t.autoPlayFn,t.reinitButton)},AdUserClose:()=>{t.vastTracker.complete(),n.videoEndActionThenNotLooped(t.video,t.autoPlayFn,t.reinitButton)},AdPaused:()=>{},AdClickThru:e=>{t.vastTracker.click(e)},AdVideoFirstQuartile:()=>{t.vastTracker.setProgress(25)},AdVideoMidpoint:()=>{t.vastTracker.setProgress(50)},AdVideoThirdQuartile:()=>{t.vastTracker.setProgress(75)},AdSkipped:()=>{t.vastTracker.skip()}}}}).call(this,r(3))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPlayerInView=void 0,t.isPlayerInView=e=>{let t=e.getBoundingClientRect();return t.top>-t.height/2&&t.bottom<=document.documentElement.clientHeight+t.height/2}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configCreativesForVideo=void 0,t.configCreativesForVideo=(e,t)=>{if(1===(null==e?void 0:e.length))return[{src:e[0].fileURL,type:e[0].mimeType,media:"all",poster:""}];const r=null==e?void 0:e.sort((e,t)=>e.width<t.width?-1:1);return null==r?void 0:r.reduce((e,r,i)=>(e.push({src:r.fileURL,type:r.mimeType,media:t[i],poster:""}),e),[])}}]);